(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){e.exports=a(211)},127:function(e,t){},129:function(e,t){},164:function(e,t){},165:function(e,t){},211:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(59),s=a(12);a(105),JSON.parse(localStorage.getItem("users"));var c=a(25),l=Object(c.a)(),u=a(27),i=a(102),m=a(103),d={SUCCESS:"ALERT_SUCCESS",ERROR:"ALERT_ERROR",CLEAR:"ALERT_CLEAR"},E={REGISTER_REQUEST:"USERS_REGISTER_REQUEST",REGISTER_SUCCESS:"USERS_REGISTER_SUCCESS",REGISTER_FAILURE:"USERS_REGISTER_FAILURE",LOGIN_REQUEST:"USERS_LOGIN_REQUEST",LOGIN_SUCCESS:"USERS_LOGIN_SUCCESS",LOGIN_FAILURE:"USERS_LOGIN_FAILURE",BUY_REQUEST:"USERS_BUY_REQUEST",BUY_SUCCESS:"USERS_BUY_SUCCESS",BUY_FAILURE:"USERS_BUY_FAILURE",SELL_REQUEST:"USERS_SELL_REQUEST",SELL_SUCCESS:"USERS_SELL_SUCCESS",SELL_FAILURE:"USERS_SELL_FAILURE",LOGOUT:"USERS_LOGOUT",GETALL_REQUEST:"USERS_GETALL_REQUEST",GETALL_SUCCESS:"USERS_GETALL_SUCCESS",GETALL_FAILURE:"USERS_GETALL_FAILURE",DELETE_REQUEST:"USERS_DELETE_REQUEST",DELETE_SUCCESS:"USERS_DELETE_SUCCESS",DELETE_FAILURE:"USERS_DELETE_FAILURE"},h="HIDE_MODAL",S="SHOW_MODAL",p={modalType:null,modalProps:{}},b=JSON.parse(localStorage.getItem("user")),f=JSON.parse(localStorage.getItem("rates")),g=b?{loggedIn:!0,user:b,rates:f}:{};var y=a(42),v=a(13);var O=Object(u.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.LOGIN_REQUEST:return{loggingIn:!0,user:t.user};case E.LOGIN_SUCCESS:return{loggedIn:!0,user:t.user,rates:t.rates};case E.LOGIN_FAILURE:case E.LOGOUT:return{};case E.BUY_REQUEST:return{loading:!0};case E.BUY_SUCCESS:return{loggedIn:!0,user:t.user,rates:t.rates};case E.BUY_FAILURE:return{loggedIn:!0,userid:t.id,error:t.error};case E.SELL_REQUEST:return{loading:!0};case E.SELL_SUCCESS:return{loggedIn:!0,user:t.user,rates:t.rates};case E.SELL_FAILURE:return{loggedIn:!0,userid:t.id,error:t.error};default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case E.REGISTER_REQUEST:return{registering:!0};case E.REGISTER_SUCCESS:case E.REGISTER_FAILURE:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.GETALL_REQUEST:return{loading:!0};case E.GETALL_SUCCESS:return{items:t.users};case E.GETALL_FAILURE:return{error:t.error};case E.DELETE_REQUEST:return Object(v.a)({},e,{items:e.items.map(function(e){return e.id===t.id?Object(v.a)({},e,{deleting:!0}):e})});case E.DELETE_SUCCESS:return{items:e.items.filter(function(e){return e.id!==t.id})};case E.DELETE_FAILURE:return Object(v.a)({},e,{items:e.items.map(function(e){if(e.id===t.id){e.deleting;var a=Object(y.a)(e,["deleting"]);return Object(v.a)({},a,{deleteError:t.error})}return e})});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return{modalProps:t.modalProps,modalType:t.modalType,type:t.type};case h:return p;default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.SUCCESS:return{type:"alert-success",message:t.message};case d.ERROR:return{type:"alert-danger",message:t.message};case d.CLEAR:return{};default:return e}}}),U=Object(m.createLogger)(),R=Object(u.d)(O,Object(u.a)(i.a,U));function L(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var C=a(15),T=a(16),_=a(19),N=a(17),I=a(18),j=a(215),A=a(214),B={success:function(e){return{type:d.SUCCESS,message:e}},error:function(e){return{type:d.ERROR,message:e}},clear:function(){return{type:d.CLEAR}}};var G={buyBtc:function(e,t,a){var n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a,amount:t,pair:e})};return fetch("/buyBtc",n).then(F).then(function(e){var t=e.text,a=t.user,n=t.rates;return localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("rates",JSON.stringify(n)),{user:a,rates:n}})},sellBtc:function(e,t,a){var n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pair:e,amount:t,id:a})};return fetch("/sellBtc",n).then(F).then(function(e){var t=e.text,a=t.user,n=t.rates;return localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("rates",JSON.stringify(n)),{user:a,rates:n}})},login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,hashedPassword:t})};return Promise.all([fetch("/users/authenticate",a),fetch("/rates")]).then(function(e){return Promise.all([F(e[0]),F(e[1])])}).then(function(e){var t=e[0].text,a=e[1].text;return localStorage.setItem("rates",JSON.stringify(a)),localStorage.setItem("user",JSON.stringify(t)),{user:t,rates:a}})},logout:w,register:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/users",t).then(F)},getAll:function(){var e={method:"GET",headers:L()};return fetch("/users",e).then(F)},getById:function(e){var t={method:"GET",headers:L()};return fetch("/users/".concat(e),t).then(F)},update:function(e){var t={method:"PUT",headers:Object(v.a)({},L(),{"Content-Type":"application/json"}),body:JSON.stringify(e)};return fetch("/users/".concat(e.id),t).then(F)},delete:function(e){var t={method:"DELETE",headers:L()};return fetch("/users/".concat(e),t).then(F)}};function w(){localStorage.removeItem("user")}function F(e){return e.text().then(function(t){var a=t&&JSON.parse(t);if(!e.ok){401===e.status&&(w(),location.reload(!0));var n=a&&a.message||e.statusText;return Promise.reject(n)}return a})}var k={buyBtc:function(e,t,a){return function(n){n(function(e){return{type:E.BUY_REQUEST,id:e}}(e)),G.buyBtc(e,t,a).then(function(a){var r=a.user,o=a.rates;n(function(e,t){return{type:E.BUY_SUCCESS,user:e,rates:t}}(r,o)),n(B.success("Trade successful, you bought ".concat(t," BTC with ").concat(e,".")))}).catch(function(e){n(function(e,t){return{type:E.BUY_FAILURE,id:e,error:t}}(a,e.toString())),n(B.error(e))})}},sellBtc:function(e,t,a){return function(n){n(function(e){return{type:E.SELL_REQUEST,id:e}}(e)),G.sellBtc(e,t,a).then(function(a){var r=a.user,o=a.rates;n(function(e,t){return{type:E.SELL_SUCCESS,user:e,rates:t}}(r,o)),n(B.success("Trade successful, you sold ".concat(t," BTC for ").concat(e,".")))}).catch(function(e){n(function(e,t){return{type:E.SELL_FAILURE,id:e,error:t}}(a,e.toString())),n(B.error(e))})}},login:function(e,t){return function(a){var n;a((n={username:e},{type:E.LOGIN_REQUEST,user:n})),G.login(e,t).then(function(e){var t=e.user,n=e.rates;a(function(e,t){return{type:E.LOGIN_SUCCESS,user:e,rates:t}}(t,n)),l.push("/")},function(e){a(function(e){return{type:E.LOGIN_FAILURE,error:e}}(e.toString())),a(B.error(e.toString()))})}},logout:function(){return G.logout(),{type:E.LOGOUT}},register:function(e){return function(t){t(function(e){return{type:E.REGISTER_REQUEST,user:e}}(e)),G.register(e).then(function(e){t(function(e){return{type:E.REGISTER_SUCCESS,user:e}}()),l.push("/login"),t(B.success("Registration successful, you may now log in."))},function(e){t(function(e){return{type:E.REGISTER_FAILURE,error:e}}(e.toString())),t(B.error(e.toString()))})}},getAll:function(){return function(e){e({type:E.GETALL_REQUEST}),G.getAll().then(function(t){return e(function(e){return{type:E.GETALL_SUCCESS,users:e}}(t))},function(t){return e(function(e){return{type:E.GETALL_FAILURE,error:e}}(t.toString()))})}},delete:function(e){return function(t){t(function(e){return{type:E.DELETE_REQUEST,id:e}}(e)),G.delete(e).then(function(a){return t(function(e){return{type:E.DELETE_SUCCESS,id:e}}(e))},function(a){return t(function(e,t){return{type:E.DELETE_FAILURE,id:e,error:t}}(e,a.toString()))})}}};var x=a(213),P=function(e){var t=e.component,a=Object(y.a)(e,["component"]);return r.a.createElement(A.a,Object.assign({},a,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(x.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Q=a(24),D=a(4),M=a(212),J=a(104),Y=a.n(J),H={trade:function(e){var t=e.closeModal,a=e.confirmAction,n=e.title,o=e.fields,s=(e.onRadioChange,e.onInputChange);e.user,e.tradeCrypto;return r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},n),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:t},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("form",null,r.a.createElement("div",{layout:"row"}),o.map(function(e){return r.a.createElement("div",{className:"form-group",key:e.label},r.a.createElement("label",{htmlFor:"address"},"".concat(e.label)),r.a.createElement("input",{id:"address",name:e.name,type:"text",className:"form-control",placeholder:"".concat(e.placeholder),onChange:s}))}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:t},"Cancel"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:a},"Continue")))}},q=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(_.a)(this,Object(N.a)(t).call(this,e))).state={modalIsOpen:!1},a.closeModal=a.closeModal.bind(Object(D.a)(Object(D.a)(a))),a}return Object(I.a)(t,e),Object(T.a)(t,[{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({modalIsOpen:e.modalProps.open})}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"render",value:function(){if(!this.props.modalType)return null;var e=H[this.props.modalType];return r.a.createElement("div",null,r.a.createElement(Y.a,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal,contentLabel:"Example Modal",ariaHideApp:!1,bodyOpenClassName:"modal-open",className:"modal-dialog modal-dialog-centered"},r.a.createElement(e,Object.assign({closeModal:this.closeModal},this.props.modalProps))))}}]),t}(r.a.Component),V=Object(s.b)(function(e){return Object(v.a)({},e.modal)},null)(q),W=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(_.a)(this,Object(N.a)(t).call(this,e))).onInputChange=a.onInputChange.bind(Object(D.a)(Object(D.a)(a))),a.openTradeModal=a.openTradeModal.bind(Object(D.a)(Object(D.a)(a))),a.buyBtc=a.buyBtc.bind(Object(D.a)(Object(D.a)(a))),a.sellBtc=a.sellBtc.bind(Object(D.a)(Object(D.a)(a))),a}return Object(I.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleDeleteUser",value:function(e){var t=this;return function(a){return t.props.dispatch(k.delete(e))}}},{key:"onInputChange",value:function(e){this.setState(Object(Q.a)({},e.target.name,e.target.value))}},{key:"buyBtc",value:function(e){e.preventDefault(),this.setState({submitted:!0}),this.props.dispatch(k.buyBtc(this.state.pair,this.state.btc,this.props.user.id)),this.props.hideModal()}},{key:"sellBtc",value:function(e){e.preventDefault(),this.setState({submitted:!0}),this.props.dispatch(k.sellBtc(this.state.pair,this.state.btc,this.props.user.id)),this.props.hideModal()}},{key:"openTradeModal",value:function(e){this.props.showModal({open:!0,title:"Trade Modal",fields:[{label:"buy"===e.target.name?"Coin to Sell":"Coin to Buy",name:"pair",placeholder:'Enter coin name to sell ("xmr", "ltc", "salt", "doge", "usd")'},{label:"buy"===e.target.name?"Bitcoin Amount to Buy":"Bitcoin Amount to Sell",name:"btc",placeholder:"Enter bitcoin amount"}],onInputChange:this.onInputChange,confirmAction:"buy"===e.target.name?this.buyBtc:this.sellBtc,user:this.props.user,crypto:this.tradeCrypto},"trade")}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.rates;if(!t)return r.a.createElement(x.a,{to:"/login"});var n=function(e,t){return Number(e.btc)+Number(e.xmr)/Number(t.xmr)+Number(e.ltc)/Number(t.ltc)+Number(e.salt)/Number(t.salt)+Number(e.doge)/Number(t.doge)+Number(e.usd)/Number(t.usd)}(t.balances,a),o=Number(a.usd)*n;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h3",null,"Hi ",t.username,"!"),r.a.createElement("h3",null,"Your Current Balances: "),r.a.createElement("h4",null,"btc: \u20bf",Number(t.balances.btc).toFixed(8)),r.a.createElement("h4",null,"xmr: \u0271",Number(t.balances.xmr).toFixed(8)),r.a.createElement("h4",null,"ltc: \u0141",Number(t.balances.ltc).toFixed(8)),r.a.createElement("h4",null,"salt: \u0394",Number(t.balances.salt).toFixed(8)),r.a.createElement("h4",null,"doge: \xd0",Number(t.balances.doge).toFixed(8)),r.a.createElement("h4",null,"usd: $",Number(t.balances.usd).toFixed(2)),r.a.createElement("h4",null,"Total Portfolio BTC Value: \u20bf",n.toFixed(8)),r.a.createElement("h4",null,"Total Portfolio USD Value: $",o.toFixed(2)),r.a.createElement("h3",null,"Current rates: "),r.a.createElement("h4",null,"xmr: ",a.xmr," xmr/btc"),r.a.createElement("h4",null,"ltc: ",a.ltc," ltc/btc"),r.a.createElement("h4",null,"salt: ",a.salt," salt/btc"),r.a.createElement("h4",null,"doge: ",a.doge," doge/btc"),r.a.createElement("h4",null,"usd: ",a.usd," usd/btc"),r.a.createElement("div",{className:"col"},r.a.createElement("button",{className:"btn btn-outline-primary btn-block",name:"buy",onClick:this.openTradeModal},"Buy BTC")),r.a.createElement("div",{className:"col"},r.a.createElement("button",{className:"btn btn-outline-primary btn-block",name:"sell",onClick:this.openTradeModal},"Sell BTC")),r.a.createElement("p",null,r.a.createElement(M.a,{to:"/login"},"Logout")),r.a.createElement(V,null))}}]),t}(r.a.Component);var $=Object(s.b)(function(e){var t=e.authentication,a=t.user,n=t.rates;return a||(a=JSON.parse(localStorage.getItem("user"))),n||(n=JSON.parse(localStorage.getItem("rates"))),{user:a,rates:n}},function(e){return{dispatch:e,buyBtc:function(t,a,n){return e(k.buyBtc(t,a,n))},sellBtc:function(t,a,n){return e(k.sellBtc(t,a,n))},logout:function(){return e(k.logout())},hideModal:function(){return e(function(e){e({type:h})})},showModal:function(t,a){e(function(e){var t=e.modalProps,a=e.modalType;return function(e){e({type:S,modalProps:t,modalType:a})}}({modalProps:t,modalType:a}))}}})(W),z=a(44),K=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(_.a)(this,Object(N.a)(t).call(this,e))).props.dispatch(k.logout()),a.state={username:"",password:"",submitted:!1},a.handleChange=a.handleChange.bind(Object(D.a)(Object(D.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(D.a)(Object(D.a)(a))),a}return Object(I.a)(t,e),Object(T.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(Q.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,a=t.username,n=t.password,r=z.createHash("sha256").update(n).digest("hex"),o=this.props.dispatch;a&&r&&o(k.login(a,r))}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.submitted;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"+(n&&!t?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:t,onChange:this.handleChange}),n&&!t&&r.a.createElement("div",{className:"help-block"},"Username is required")),r.a.createElement("div",{className:"form-group"+(n&&!a?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:a,onChange:this.handleChange}),n&&!a&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Login"),r.a.createElement(M.a,{to:"/register",className:"btn btn-link"},"Register"))))}}]),t}(r.a.Component);var X=Object(s.b)(function(e){return{loggingIn:e.authentication.loggingIn}})(K),Z=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(_.a)(this,Object(N.a)(t).call(this,e))).state={user:{username:"",password:""},submitted:!1},a.handleChange=a.handleChange.bind(Object(D.a)(Object(D.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(D.a)(Object(D.a)(a))),a}return Object(I.a)(t,e),Object(T.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=this.state.user;this.setState({user:Object(v.a)({},r,Object(Q.a)({},a,n))})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state.user,a=this.props.dispatch;t.hashedPassword=z.createHash("sha256").update(t.password).digest("hex"),t.username&&t.hashedPassword&&a(k.register(t))}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.submitted;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h2",null,"Register"),r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"+(a&&!t.username?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:t.username,onChange:this.handleChange}),a&&!t.username&&r.a.createElement("div",{className:"help-block"},"Username is required")),r.a.createElement("div",{className:"form-group"+(a&&!t.password?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:t.password,onChange:this.handleChange}),a&&!t.password&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Register"),r.a.createElement(M.a,{to:"/login",className:"btn btn-link"},"Cancel"))))}}]),t}(r.a.Component);var ee=Object(s.b)(function(e){return{registering:e.registration.registering}})(Z),te=function(e){function t(e){var a;Object(C.a)(this,t);var n=(a=Object(_.a)(this,Object(N.a)(t).call(this,e))).props.dispatch;return l.listen(function(e,t){n(B.clear())}),a}return Object(I.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.props.alert;return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-sm-8 col-sm-offset-2"},e.message&&r.a.createElement("div",{className:"alert ".concat(e.type)},e.message),r.a.createElement(j.a,{history:l},r.a.createElement("div",null,r.a.createElement(P,{exact:!0,path:"/",component:$}),r.a.createElement(A.a,{path:"/login",component:X}),r.a.createElement(A.a,{path:"/register",component:ee}))))))}}]),t}(r.a.Component);var ae=Object(s.b)(function(e){return{alert:e.alert}})(te);Object(o.render)(r.a.createElement(s.a,{store:R},r.a.createElement(ae,null)),document.getElementById("app"))}},[[106,1,2]]]);
//# sourceMappingURL=main.2f23e042.chunk.js.map